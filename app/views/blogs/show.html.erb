<section class="section">
  <div class="container">
    <h1 class="title is-3"><%= @blog.titulo %></h1>

    <div class="content">
      
      <p><%= @blog.descripcion %></p>

      <p><strong>Tipo de publicación:</strong> <%= @blog.tipo_publicacion.capitalize %></p>

      <% if @blog.etiquetas.present? %>
        <p><strong>Etiquetas:</strong> <%= @blog.etiquetas %></p>
      <% end %>

      <p class="has-text-grey-light is-size-7">
        Publicado el <%= @blog.created_at.strftime("%d/%m/%Y") %> por <%= @blog.autor&.nombre || "Autor desconocido" %>
      </p>
    </div>

    <% if @blog.estado == "rechazado" && @blog.mensaje_moderacion.present? && user_signed_in? && @blog.autor == current_user %>
      <div class="notification is-danger mt-4">
        <strong>Tu blog fue rechazado por un moderador.</strong><br>
        Motivo: <%= @blog.mensaje_moderacion %>
      </div>
    <% elsif @blog.estado == "aprobado" && user_signed_in? && @blog.autor == current_user %>
      <div class="notification is-success mt-4">
        ✅☂¡Tu blog fue aceptado por un moderador!☂✅
      </div>
    <% end %>

    <div class="buttons mt-4">
      <%= link_to 'Volver al inicio', root_path, class: 'button is-light' %>
    </div>

    <% if user_signed_in? && (
          @blog.estado == "aprobado" ||
          (@blog.estado == "rechazado" && @blog.autor == current_user)
        ) %>
      <div class="buttons mt-4">
        <%= link_to "Solicitar edición", new_solicitud_edicion_path(blog_id: @blog.id), class: "button is-warning" %>
      </div>
    <% end %>

  </div>
</section>
